import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('üå± Iniciando seed do banco de dados...');

  console.log('üí≥ Criando planos...');
  const plans = [
    {
      id: 'basic',
      name: 'Basic',
      priceCents: 9900,
      currency: 'BRL',
      description: 'Plano b√°sico para pequenos profissionais',
      features: JSON.stringify([
        'At√© 100 agendamentos/m√™s',
        'Gest√£o de clientes',
        'Calend√°rio b√°sico',
        'Suporte por email'
      ]),
      active: true,
      sortOrder: 1
    },
    {
      id: 'pro',
      name: 'Pro',
      priceCents: 19900,
      currency: 'BRL',
      description: 'Plano profissional para cl√≠nicas em crescimento',
      features: JSON.stringify([
        'Agendamentos ilimitados',
        'Gest√£o de clientes avan√ßada',
        'Calend√°rio completo',
        'Relat√≥rios financeiros',
        'M√∫ltiplos profissionais',
        'Suporte priorit√°rio'
      ]),
      active: true,
      sortOrder: 2
    },
    {
      id: 'enterprise',
      name: 'Enterprise',
      priceCents: 39900,
      currency: 'BRL',
      description: 'Plano empresarial para grandes cl√≠nicas',
      features: JSON.stringify([
        'Tudo do plano Pro',
        'API personalizada',
        'Integra√ß√£o com sistemas',
        'M√∫ltiplas unidades',
        'Suporte dedicado 24/7',
        'Customiza√ß√µes avan√ßadas'
      ]),
      active: true,
      sortOrder: 3
    }
  ];

  for (const planData of plans) {
    await prisma.plan.upsert({
      where: { id: planData.id },
      update: planData,
      create: planData
    });
    console.log(`  ‚úÖ Plano "${planData.name}" criado/atualizado`);
  }

  // Criar tipos de neg√≥cio e abas
  const businessTypesData = [
    {
      name: 'Barbearia',
      description: 'Servi√ßos de corte de cabelo e barba para homens.',
      icon: 'barber',
      color: '#dc2626',
      sortOrder: 1,
      tabs: [
        {
          name: 'Dados B√°sicos',
          slug: 'dados-basicos',
          description: 'Informa√ß√µes b√°sicas do cliente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'aniversario', label: 'Data de Anivers√°rio', type: 'date', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false }
            ]
          })
        },
        {
          name: 'Hist√≥rico de Servi√ßos',
          slug: 'historico-servicos',
          description: '√öltimos cortes e servi√ßos realizados',
          icon: 'üìä',
          color: '#10b981',
          isRequired: false,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'services', label: 'Servi√ßos Realizados', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Prefer√™ncias',
          slug: 'preferencias',
          description: 'Prefer√™ncias de corte e estilo',
          icon: '‚≠ê',
          color: '#f59e0b',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'cortePreferido', label: 'Corte Preferido', type: 'text', required: false },
              { name: 'estiloBarba', label: 'Estilo de Barba', type: 'text', required: false },
              { name: 'observacoes', label: 'Observa√ß√µes Especiais', type: 'textarea', required: false }
            ]
          })
        },
        {
          name: 'Recorr√™ncia',
          slug: 'recorr√™ncia',
          description: 'Agendamentos autom√°ticos e frequ√™ncia',
          icon: 'üîÑ',
          color: '#8b5cf6',
          isRequired: false,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'frequencia', label: 'Frequ√™ncia (dias)', type: 'number', required: false },
              { name: 'autoAgendamento', label: 'Agendamento Autom√°tico', type: 'boolean', required: false },
              { name: 'diasPreferidos', label: 'Dias Preferidos', type: 'multiselect', options: ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'], required: false },
              { name: 'horarioPreferido', label: 'Hor√°rio Preferido', type: 'time', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Sal√£o de Beleza',
      description: 'Sal√µes de beleza e est√©tica',
      icon: 'beauty',
      color: '#ec4899',
      sortOrder: 2,
      tabs: [
        {
          name: 'Dados B√°sicos',
          slug: 'dados-basicos',
          description: 'Informa√ß√µes b√°sicas da cliente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'aniversario', label: 'Data de Anivers√°rio', type: 'date', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false },
              { name: 'tipoCapelo', label: 'Tipo de Cabelo', type: 'select', options: ['Liso', 'Ondulado', 'Cacheado', 'Crespo'], required: false }
            ]
          })
        },
        {
          name: 'Hist√≥rico de Servi√ßos',
          slug: 'historico-servicos',
          description: 'Cabelo, unhas, depila√ß√£o e est√©tica',
          icon: 'üìä',
          color: '#10b981',
          isRequired: false,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'services', label: 'Servi√ßos Realizados', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Prefer√™ncias',
          slug: 'preferencias',
          description: 'Cores, produtos e t√©cnicas preferidas',
          icon: 'üé®',
          color: '#f59e0b',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'corEsmalte', label: 'Cor de Esmalte Preferida', type: 'color', required: false },
              { name: 'coloracao', label: 'Colora√ß√£o Preferida', type: 'text', required: false },
              { name: 'quimicos', label: 'Qu√≠micos Utilizados', type: 'textarea', required: false },
              { name: 'alergias', label: 'Alergias a Produtos', type: 'textarea', required: false }
            ]
          })
        },
        {
          name: 'Pacotes e Planos',
          slug: 'pacotes-planos',
          description: 'Controle de sess√µes pr√©-pagas',
          icon: 'üíé',
          color: '#8b5cf6',
          isRequired: false,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'packages', label: 'Pacotes Adquiridos', type: 'array', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Cl√≠nica de Sa√∫de',
      description: 'Consultas m√©dicas, fisioterapia, psicologia, etc.',
      icon: 'health',
      color: '#0891b2',
      sortOrder: 3,
      tabs: [
        {
          name: 'Dados do Paciente',
          slug: 'dados-paciente',
          description: 'Informa√ß√µes completas do paciente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'convenio', label: 'Conv√™nio', type: 'text', required: false },
              { name: 'tipoSanguineo', label: 'Tipo Sangu√≠neo', type: 'select', options: ['A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'], required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false },
              { name: 'estadoCivil', label: 'Estado Civil', type: 'select', options: ['Solteiro', 'Casado', 'Divorciado', 'Vi√∫vo'], required: false }
            ]
          })
        },
        {
          name: 'Anamnese',
          slug: 'anamnese',
          description: 'Hist√≥ria cl√≠nica e quest√µes m√©dicas',
          icon: 'üìã',
          color: '#ef4444',
          isRequired: true,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'medicamentos', label: 'Medicamentos em uso', type: 'textarea', required: false },
              { name: 'alergias', label: 'Alergias conhecidas', type: 'textarea', required: false },
              { name: 'doencas', label: 'Doen√ßas pr√©-existentes', type: 'textarea', required: false },
              { name: 'cirurgias', label: 'Cirurgias anteriores', type: 'textarea', required: false },
              { name: 'gestante', label: 'Gestante', type: 'boolean', required: false },
              { name: 'fumante', label: 'Fumante', type: 'boolean', required: false },
              { name: 'diabetes', label: 'Diabetes', type: 'boolean', required: false },
              { name: 'hipertensao', label: 'Hipertens√£o', type: 'boolean', required: false }
            ]
          })
        },
        {
          name: 'Prontu√°rio',
          slug: 'prontuario',
          description: 'Registro detalhado de consultas e procedimentos',
          icon: 'üî¨',
          color: '#10b981',
          isRequired: true,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'entries', label: 'Entradas do Prontu√°rio', type: 'array', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Odontologia',
      description: 'Servi√ßos odontol√≥gicos e tratamentos dent√°rios.',
      icon: 'dental',
      color: '#0ea5e9',
      sortOrder: 4,
      tabs: [
        {
          name: 'Dados B√°sicos',
          slug: 'dados-basicos',
          description: 'Informa√ß√µes b√°sicas do paciente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'convenio', label: 'Conv√™nio', type: 'text', required: false },
              { name: 'numeroCartao', label: 'N√∫mero do Cart√£o', type: 'text', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false },
              { name: 'estadoCivil', label: 'Estado Civil', type: 'select', options: ['Solteiro', 'Casado', 'Divorciado', 'Vi√∫vo'], required: false }
            ]
          })
        },
        {
          name: 'Anamnese',
          slug: 'anamnese',
          description: 'Hist√≥ria cl√≠nica e quest√µes m√©dicas',
          icon: 'üìã',
          color: '#ef4444',
          isRequired: true,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'medicamentos', label: 'Medicamentos em uso', type: 'textarea', required: false },
              { name: 'alergias', label: 'Alergias conhecidas', type: 'textarea', required: false },
              { name: 'doencas', label: 'Doen√ßas pr√©-existentes', type: 'textarea', required: false },
              { name: 'cirurgias', label: 'Cirurgias anteriores', type: 'textarea', required: false },
              { name: 'gestante', label: 'Gestante', type: 'boolean', required: false },
              { name: 'fumante', label: 'Fumante', type: 'boolean', required: false },
              { name: 'diabetes', label: 'Diabetes', type: 'boolean', required: false },
              { name: 'hipertensao', label: 'Hipertens√£o', type: 'boolean', required: false }
            ]
          })
        },
        {
          name: 'Prontu√°rio',
          slug: 'prontuario',
          description: 'Registro detalhado de consultas e procedimentos',
          icon: 'üî¨',
          color: '#10b981',
          isRequired: true,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'entries', label: 'Entradas do Prontu√°rio', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Odontograma',
          slug: 'odontograma',
          description: 'Mapa interativo dos dentes',
          icon: 'üóÇÔ∏è',
          color: '#f59e0b',
          isRequired: true,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'teeth', label: 'Estado dos Dentes', type: 'odontogram', required: false }
            ]
          })
        },
        {
          name: 'Plano de Tratamento',
          slug: 'plano-tratamento',
          description: 'Procedimentos futuros e planejamento',
          icon: 'üìÖ',
          color: '#8b5cf6',
          isRequired: false,
          sortOrder: 4,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'procedures', label: 'Procedimentos Planejados', type: 'array', required: false },
              { name: 'priority', label: 'Prioridade', type: 'select', options: ['Baixa', 'M√©dia', 'Alta', 'Urgente'], required: false },
              { name: 'estimatedCost', label: 'Custo Estimado', type: 'currency', required: false },
              { name: 'estimatedSessions', label: 'Sess√µes Estimadas', type: 'number', required: false }
            ]
          })
        },
        {
          name: 'Documentos',
          slug: 'documentos',
          description: 'Radiografias, fotos e exames',
          icon: 'üìÅ',
          color: '#06b6d4',
          isRequired: false,
          sortOrder: 5,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'documents', label: 'Documentos', type: 'files', required: false }
            ]
          })
        },
        {
          name: 'Financeiro',
          slug: 'financeiro',
          description: 'Hist√≥rico de pagamentos e procedimentos',
          icon: 'üí∞',
          color: '#84cc16',
          isRequired: false,
          sortOrder: 6,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'payments', label: 'Pagamentos', type: 'array', required: false },
              { name: 'installments', label: 'Parcelamentos', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'M√≥dulo Cl√≠nico',
          slug: 'modulo-clinico',
          description: 'Sistema cl√≠nico completo: Anamnese, Prontu√°rio, Odontograma e Hist√≥rico',
          icon: 'üè•',
          color: '#10b981',
          isRequired: false,
          sortOrder: 7,
          fieldConfig: JSON.stringify({
            type: 'clinical_module'
          })
        }
      ]
    },
    {
      name: 'Banho e Tosa',
      description: 'Servi√ßos de higiene e est√©tica para animais de estima√ß√£o.',
      icon: 'pet',
      color: '#059669',
      sortOrder: 5,
      tabs: [
        {
          name: 'Dados do Tutor',
          slug: 'dados-tutor',
          description: 'Informa√ß√µes do propriet√°rio',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'endereco', label: 'Endere√ßo Completo', type: 'textarea', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false }
            ]
          })
        },
        {
          name: 'Dados do Pet',
          slug: 'dados-pet',
          description: 'Informa√ß√µes do animal',
          icon: 'üêï',
          color: '#f59e0b',
          isRequired: true,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'pets', label: 'Pets', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Hist√≥rico de Servi√ßos',
          slug: 'historico-servicos',
          description: 'Banho, tosa e cuidados realizados',
          icon: 'üõÅ',
          color: '#10b981',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'services', label: 'Servi√ßos por Pet', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Observa√ß√µes do Pet',
          slug: 'observacoes-pet',
          description: 'Comportamento e cuidados especiais',
          icon: 'üìù',
          color: '#ef4444',
          isRequired: false,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'behavior', label: 'Comportamento', type: 'select', options: ['D√≥cil', 'Agitado', 'Agressivo', 'Medroso'], required: false },
              { name: 'alergias', label: 'Alergias Conhecidas', type: 'textarea', required: false },
              { name: 'produtos', label: 'Produtos Permitidos', type: 'textarea', required: false },
              { name: 'observacoes', label: 'Observa√ß√µes Gerais', type: 'textarea', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Outros',
      description: 'Outros tipos de neg√≥cio que se encaixam no agendamento.',
      icon: 'other',
      color: '#6b7280',
      sortOrder: 99,
      tabs: []
    }
  ];

  for (const businessTypeData of businessTypesData) {
    const { tabs, ...typeData } = businessTypeData;

    const businessType = await prisma.businessType.upsert({
      where: { name: typeData.name },
      update: typeData,
      create: typeData,
    });
    console.log(`  ‚úÖ Tipo de Neg√≥cio "${businessType.name}" criado/atualizado`);

    for (const tabData of tabs) {
      await prisma.businessTypeTab.upsert({
        where: { slug_businessTypeId: { slug: tabData.slug, businessTypeId: businessType.id } },
        update: { ...tabData, businessTypeId: businessType.id },
        create: { ...tabData, businessTypeId: businessType.id },
      });
      console.log(`    ‚úÖ Aba "${tabData.name}" criada/atualizada`);
    }
  }

  console.log('Seeding de Tipos de Neg√≥cio conclu√≠do.');

  // Remover a declara√ß√£o original de businessTypes para evitar duplica√ß√£o
  /  // const businessTypes = [ // Removido para evitar duplica√ß√£o
  // ... (c√≥digo removido)
  // ];

  // Remover o loop de cria√ß√£o de businessTypes original
  //  // for (const businessTypeData of businessTypes) { // Removido para evitar duplica√ß√£o  // ... (c√≥digo removido)
  // }
    {
      name: 'Odontologia',
      description: 'Cl√≠nicas odontol√≥gicas, dentistas e consultorias dent√°rias',
      icon: 'ü¶∑',
      color: '#0ea5e9',
      tabs: [
        {
          name: 'Dados B√°sicos',
          slug: 'dados-basicos',
          description: 'Informa√ß√µes b√°sicas do paciente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'convenio', label: 'Conv√™nio', type: 'text', required: false },
              { name: 'numeroCartao', label: 'N√∫mero do Cart√£o', type: 'text', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false },
              { name: 'estadoCivil', label: 'Estado Civil', type: 'select', options: ['Solteiro', 'Casado', 'Divorciado', 'Vi√∫vo'], required: false }
            ]
          })
        },
        {
          name: 'Anamnese',
          slug: 'anamnese',
          description: 'Hist√≥ria cl√≠nica e quest√µes m√©dicas',
          icon: 'üìã',
          color: '#ef4444',
          isRequired: true,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'medicamentos', label: 'Medicamentos em uso', type: 'textarea', required: false },
              { name: 'alergias', label: 'Alergias conhecidas', type: 'textarea', required: false },
              { name: 'doencas', label: 'Doen√ßas pr√©-existentes', type: 'textarea', required: false },
              { name: 'cirurgias', label: 'Cirurgias anteriores', type: 'textarea', required: false },
              { name: 'gestante', label: 'Gestante', type: 'boolean', required: false },
              { name: 'fumante', label: 'Fumante', type: 'boolean', required: false },
              { name: 'diabetes', label: 'Diabetes', type: 'boolean', required: false },
              { name: 'hipertensao', label: 'Hipertens√£o', type: 'boolean', required: false }
            ]
          })
        },
        {
          name: 'Prontu√°rio',
          slug: 'prontuario',
          description: 'Registro detalhado de consultas e procedimentos',
          icon: 'üî¨',
          color: '#10b981',
          isRequired: true,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'entries', label: 'Entradas do Prontu√°rio', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Odontograma',
          slug: 'odontograma',
          description: 'Mapa interativo dos dentes',
          icon: 'üóÇÔ∏è',
          color: '#f59e0b',
          isRequired: true,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'teeth', label: 'Estado dos Dentes', type: 'odontogram', required: false }
            ]
          })
        },
        {
          name: 'Plano de Tratamento',
          slug: 'plano-tratamento',
          description: 'Procedimentos futuros e planejamento',
          icon: 'üìÖ',
          color: '#8b5cf6',
          isRequired: false,
          sortOrder: 4,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'procedures', label: 'Procedimentos Planejados', type: 'array', required: false },
              { name: 'priority', label: 'Prioridade', type: 'select', options: ['Baixa', 'M√©dia', 'Alta', 'Urgente'], required: false },
              { name: 'estimatedCost', label: 'Custo Estimado', type: 'currency', required: false },
              { name: 'estimatedSessions', label: 'Sess√µes Estimadas', type: 'number', required: false }
            ]
          })
        },
        {
          name: 'Documentos',
          slug: 'documentos',
          description: 'Radiografias, fotos e exames',
          icon: 'üìÅ',
          color: '#06b6d4',
          isRequired: false,
          sortOrder: 5,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'documents', label: 'Documentos', type: 'files', required: false }
            ]
          })
        },
        {
          name: 'Financeiro',
          slug: 'financeiro',
          description: 'Hist√≥rico de pagamentos e procedimentos',
          icon: 'üí∞',
          color: '#84cc16',
          isRequired: false,
          sortOrder: 6,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'payments', label: 'Pagamentos', type: 'array', required: false },
              { name: 'installments', label: 'Parcelamentos', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'M√≥dulo Cl√≠nico',
          slug: 'modulo-clinico',
          description: 'Sistema cl√≠nico completo: Anamnese, Prontu√°rio, Odontograma e Hist√≥rico',
          icon: 'üè•',
          color: '#10b981',
          isRequired: false,
          sortOrder: 7,
          fieldConfig: JSON.stringify({
            type: 'clinical_module'
          })
        }
      ]
    },
    {
      name: 'Barbearia',
      description: 'Barbearias e sal√µes masculinos',
      icon: '‚úÇÔ∏è',
      color: '#dc2626',
      tabs: [
        {
          name: 'Dados B√°sicos',
          slug: 'dados-basicos',
          description: 'Informa√ß√µes b√°sicas do cliente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'aniversario', label: 'Data de Anivers√°rio', type: 'date', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false }
            ]
          })
        },
        {
          name: 'Hist√≥rico de Servi√ßos',
          slug: 'historico-servicos',
          description: '√öltimos cortes e servi√ßos realizados',
          icon: 'üìä',
          color: '#10b981',
          isRequired: false,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'services', label: 'Servi√ßos Realizados', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Prefer√™ncias',
          slug: 'preferencias',
          description: 'Prefer√™ncias de corte e estilo',
          icon: '‚≠ê',
          color: '#f59e0b',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'cortePreferido', label: 'Corte Preferido', type: 'text', required: false },
              { name: 'estiloBarba', label: 'Estilo de Barba', type: 'text', required: false },
              { name: 'observacoes', label: 'Observa√ß√µes Especiais', type: 'textarea', required: false }
            ]
          })
        },
        {
          name: 'Recorr√™ncia',
          slug: 'recorrencia',
          description: 'Agendamentos autom√°ticos e frequ√™ncia',
          icon: 'üîÑ',
          color: '#8b5cf6',
          isRequired: false,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'frequencia', label: 'Frequ√™ncia (dias)', type: 'number', required: false },
              { name: 'autoAgendamento', label: 'Agendamento Autom√°tico', type: 'boolean', required: false },
              { name: 'diasPreferidos', label: 'Dias Preferidos', type: 'multiselect', options: ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'], required: false },
              { name: 'horarioPreferido', label: 'Hor√°rio Preferido', type: 'time', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Sal√£o de Beleza',
      description: 'Sal√µes de beleza e est√©tica',
      icon: 'üíÖ',
      color: '#ec4899',
      tabs: [
        {
          name: 'Dados B√°sicos',
          slug: 'dados-basicos',
          description: 'Informa√ß√µes b√°sicas da cliente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'aniversario', label: 'Data de Anivers√°rio', type: 'date', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false },
              { name: 'tipoCapelo', label: 'Tipo de Cabelo', type: 'select', options: ['Liso', 'Ondulado', 'Cacheado', 'Crespo'], required: false }
            ]
          })
        },
        {
          name: 'Hist√≥rico de Servi√ßos',
          slug: 'historico-servicos',
          description: 'Cabelo, unhas, depila√ß√£o e est√©tica',
          icon: 'üìä',
          color: '#10b981',
          isRequired: false,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'services', label: 'Servi√ßos Realizados', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Prefer√™ncias',
          slug: 'preferencias',
          description: 'Cores, produtos e t√©cnicas preferidas',
          icon: 'üé®',
          color: '#f59e0b',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'corEsmalte', label: 'Cor de Esmalte Preferida', type: 'color', required: false },
              { name: 'coloracao', label: 'Colora√ß√£o Preferida', type: 'text', required: false },
              { name: 'quimicos', label: 'Qu√≠micos Utilizados', type: 'textarea', required: false },
              { name: 'alergias', label: 'Alergias a Produtos', type: 'textarea', required: false }
            ]
          })
        },
        {
          name: 'Pacotes e Planos',
          slug: 'pacotes-planos',
          description: 'Controle de sess√µes pr√©-pagas',
          icon: 'üíé',
          color: '#8b5cf6',
          isRequired: false,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'packages', label: 'Pacotes Adquiridos', type: 'array', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Pet Shop',
      description: 'Pet shops e cl√≠nicas veterin√°rias',
      icon: 'üêæ',
      color: '#059669',
      tabs: [
        {
          name: 'Dados do Tutor',
          slug: 'dados-tutor',
          description: 'Informa√ß√µes do propriet√°rio',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'endereco', label: 'Endere√ßo Completo', type: 'textarea', required: false },
              { name: 'profissao', label: 'Profiss√£o', type: 'text', required: false }
            ]
          })
        },
        {
          name: 'Dados do Pet',
          slug: 'dados-pet',
          description: 'Informa√ß√µes do animal',
          icon: 'üêï',
          color: '#f59e0b',
          isRequired: true,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'pets', label: 'Pets', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Hist√≥rico de Servi√ßos',
          slug: 'historico-servicos',
          description: 'Banho, tosa e cuidados realizados',
          icon: 'üõÅ',
          color: '#10b981',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'services', label: 'Servi√ßos por Pet', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Observa√ß√µes do Pet',
          slug: 'observacoes-pet',
          description: 'Comportamento e cuidados especiais',
          icon: 'üìù',
          color: '#ef4444',
          isRequired: false,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'behavior', label: 'Comportamento', type: 'select', options: ['D√≥cil', 'Agitado', 'Agressivo', 'Medroso'], required: false },
              { name: 'alergias', label: 'Alergias Conhecidas', type: 'textarea', required: false },
              { name: 'produtos', label: 'Produtos Permitidos', type: 'textarea', required: false },
              { name: 'observacoes', label: 'Observa√ß√µes Gerais', type: 'textarea', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Professor Particular',
      description: 'Aulas de m√∫sica, idiomas e refor√ßo escolar',
      icon: 'üéì',
      color: '#7c3aed',
      tabs: [
        {
          name: 'Dados do Aluno',
          slug: 'dados-aluno',
          description: 'Informa√ß√µes b√°sicas do estudante',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'idade', label: 'Idade', type: 'number', required: false },
              { name: 'nivelConhecimento', label: 'N√≠vel de Conhecimento', type: 'select', options: ['Iniciante', 'B√°sico', 'Intermedi√°rio', 'Avan√ßado'], required: false },
              { name: 'objetivos', label: 'Objetivos', type: 'textarea', required: false }
            ]
          })
        },
        {
          name: 'Hist√≥rico de Aulas',
          slug: 'historico-aulas',
          description: 'Registro de aulas e progresso',
          icon: 'üìö',
          color: '#10b981',
          isRequired: false,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'lessons', label: 'Aulas Realizadas', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Plano de Estudos',
          slug: 'plano-estudos',
          description: 'Conte√∫do program√°tico e cronograma',
          icon: 'üìã',
          color: '#f59e0b',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'curriculum', label: 'Curr√≠culo Planejado', type: 'array', required: false },
              { name: 'materials', label: 'Materiais Utilizados', type: 'textarea', required: false },
              { name: 'homework', label: 'Tarefas Pendentes', type: 'array', required: false }
            ]
          })
        }
      ]
    },
    {
      name: 'Cl√≠nica de Sa√∫de',
      description: 'Ginecologia, dermatologia, psicologia e outras especialidades',
      icon: 'üè•',
      color: '#0891b2',
      tabs: [
        {
          name: 'Dados do Paciente',
          slug: 'dados-paciente',
          description: 'Informa√ß√µes completas do paciente',
          icon: 'üë§',
          color: '#6366f1',
          isRequired: true,
          sortOrder: 0,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'convenio', label: 'Conv√™nio M√©dico', type: 'text', required: false },
              { name: 'numeroCartao', label: 'N√∫mero do Cart√£o', type: 'text', required: false },
              { name: 'contatoEmergencia', label: 'Contato de Emerg√™ncia', type: 'text', required: false }
            ]
          })
        },
        {
          name: 'Prontu√°rio Cl√≠nico',
          slug: 'prontuario-clinico',
          description: 'Hist√≥rico m√©dico e diagn√≥sticos',
          icon: 'üìã',
          color: '#ef4444',
          isRequired: true,
          sortOrder: 1,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'entries', label: 'Entradas do Prontu√°rio', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Exames e Documentos',
          slug: 'exames-documentos',
          description: 'Resultados laboratoriais e imagens',
          icon: 'üî¨',
          color: '#10b981',
          isRequired: false,
          sortOrder: 2,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'exams', label: 'Exames', type: 'array', required: false },
              { name: 'documents', label: 'Documentos', type: 'files', required: false }
            ]
          })
        },
        {
          name: 'Prescri√ß√µes',
          slug: 'prescricoes',
          description: 'Receitas m√©dicas e atestados',
          icon: 'üíä',
          color: '#f59e0b',
          isRequired: false,
          sortOrder: 3,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'prescriptions', label: 'Prescri√ß√µes', type: 'array', required: false },
              { name: 'certificates', label: 'Atestados', type: 'array', required: false }
            ]
          })
        },
        {
          name: 'Plano de Tratamento',
          slug: 'plano-tratamento',
          description: 'Planejamento terap√™utico',
          icon: 'üéØ',
          color: '#8b5cf6',
          isRequired: false,
          sortOrder: 4,
          fieldConfig: JSON.stringify({
            fields: [
              { name: 'treatments', label: 'Tratamentos Planejados', type: 'array', required: false },
              { name: 'followUps', label: 'Retornos Programados', type: 'array', required: false }
            ]
          })
        }
      ]
    }
  ];

  // Inserir tipos de neg√≥cio e suas abas
  for (const businessType of businessTypes) {
    const { tabs, ...businessTypeData } = businessType;
    
    const createdBusinessType = await prisma.businessType.upsert({
      where: { name: businessTypeData.name },
      update: businessTypeData,
      create: businessTypeData,
    });

    console.log(`‚úÖ Tipo de neg√≥cio "${createdBusinessType.name}" criado/atualizado`);

    // Inserir abas para este tipo de neg√≥cio
    for (const tab of tabs) {
      const createdTab = await prisma.businessTypeTab.upsert({
        where: {
          businessTypeId_slug: {
            businessTypeId: createdBusinessType.id,
            slug: tab.slug
          }
        },
        update: {
          name: tab.name,
          description: tab.description,
          icon: tab.icon,
          color: tab.color,
          isRequired: tab.isRequired,
          sortOrder: tab.sortOrder,
          fieldConfig: tab.fieldConfig
        },
        create: {
          businessTypeId: createdBusinessType.id,
          name: tab.name,
          slug: tab.slug,
          description: tab.description,
          icon: tab.icon,
          color: tab.color,
          isRequired: tab.isRequired,
          sortOrder: tab.sortOrder,
          fieldConfig: tab.fieldConfig
        },
      });

      console.log(`  üìã Aba "${createdTab.name}" criada/atualizada`);
    }
  }

  // Criar tratamentos odontol√≥gicos padr√£o
  const dentalTreatments = [
    {
      name: 'Restaura√ß√£o com Resina',
      category: 'restaurador',
      description: 'Restaura√ß√£o est√©tica com resina composta',
      estimatedDuration: 60,
      averagePrice: 150.0,
      color: '#3b82f6'
    },
    {
      name: 'Limpeza Profissional',
      category: 'preventivo', 
      description: 'Profilaxia e remo√ß√£o de t√°rtaro',
      estimatedDuration: 45,
      averagePrice: 80.0,
      color: '#10b981'
    },
    {
      name: 'Extra√ß√£o Dent√°ria',
      category: 'cirurgico',
      description: 'Remo√ß√£o de dente',
      estimatedDuration: 30,
      averagePrice: 120.0,
      color: '#ef4444'
    },
    {
      name: 'Tratamento de Canal',
      category: 'endodontico',
      description: 'Endodontia - tratamento do canal radicular',
      estimatedDuration: 90,
      averagePrice: 400.0,
      color: '#ec4899'
    },
    {
      name: 'Coroa Prot√©tica',
      category: 'prot√©tico',
      description: 'Pr√≥tese fixa unit√°ria',
      estimatedDuration: 120,
      averagePrice: 800.0,
      color: '#f59e0b'
    },
    {
      name: 'Implante Dent√°rio',
      category: 'cirurgico',
      description: 'Coloca√ß√£o de implante osseointegrado',
      estimatedDuration: 60,
      averagePrice: 1500.0,
      color: '#8b5cf6'
    },
    {
      name: 'Clareamento Dental',
      category: 'est√©tico',
      description: 'Clareamento dos dentes',
      estimatedDuration: 60,
      averagePrice: 300.0,
      color: '#06b6d4'
    },
    {
      name: 'Aplica√ß√£o de Fl√∫or',
      category: 'preventivo',
      description: 'Aplica√ß√£o t√≥pica de fl√∫or',
      estimatedDuration: 15,
      averagePrice: 40.0,
      color: '#84cc16'
    },
    {
      name: 'Faceta de Porcelana',
      category: 'est√©tico',
      description: 'Laminado cer√¢mico est√©tico',
      estimatedDuration: 120,
      averagePrice: 1200.0,
      color: '#f97316'
    },
    {
      name: 'Aparelho Ortod√¥ntico',
      category: 'ortodontico',
      description: 'Instala√ß√£o de aparelho ortod√¥ntico',
      estimatedDuration: 90,
      averagePrice: 2500.0,
      color: '#a855f7'
    }
  ];

  console.log('ü¶∑ Criando tratamentos odontol√≥gicos...');

  for (const treatment of dentalTreatments) {
    await prisma.dentalTreatment.upsert({
      where: { name: treatment.name },
      update: treatment,
      create: treatment
    });
    console.log(`  ‚úÖ Tratamento "${treatment.name}" criado/atualizado`);
  }

  console.log('Seeding conclu√≠do com sucesso!');}

main()
  .catch((e) => {
    console.error('‚ùå Erro durante o seed:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });